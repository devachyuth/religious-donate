<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Religious Crypto Donations</title>
<meta name="description" content="Anonymous quick crypto receive page. Pick coin → pick chain → copy, scan QR or Click to send."/>

<!-- Religion Buttons (Bottom Center Floating) -->
<div class="religion-buttons">
  <button class="religion-btn active" data-religion="hindu">
    <img src="hindu.png" alt="Hindu" class="religion-icon">
    Hindu
  </button>
  <button class="religion-btn" data-religion="muslim">
    <img src="muslim.png" alt="Muslim" class="religion-icon">
    Muslim
  </button>
  <button class="religion-btn" data-religion="jew">
    <img src="jew.png" alt="Jew" class="religion-icon">
    Jew
  </button>
  <button class="religion-btn" data-religion="christian">
    <img src="christian.png" alt="Christian" class="religion-icon">
    Christian
  </button>
  <button class="religion-btn" data-religion="others">
    <img src="others.png" alt="Others" class="religion-icon">
    Others
  </button>
</div>

<style>
/* Bottom Center Floating Bar (Apple-style glassmorphism) */
.religion-buttons {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 10px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 50px;
  padding: 8px 14px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  z-index: 999;
  flex-wrap: nowrap;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

.religion-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  border: none;
  background: transparent;
  color: #111;
  font-weight: 500;
  font-family: 'SF Pro Display', sans-serif;
  cursor: pointer;
  border-radius: 40px;
  padding: 6px 12px;
  transition: all 0.3s ease;
}

.religion-btn img {
  width: 20px;
  height: 20px;
}

.religion-btn.active {
  background: #111;
  color: #fff;
}

/* Mobile View */
@media (max-width: 768px) {
  .religion-buttons {
    bottom: 10px;
    gap: 6px;
    padding: 6px 10px;
    border-radius: 40px;
  }

  .religion-btn {
    font-size: 12px;
    padding: 4px 8px;
  }

  .religion-btn img {
    width: 16px;
    height: 16px;
  }

  .religion-buttons.hide-on-popup {
    opacity: 0;
    visibility: hidden;
  }
}

/* Icon styling */
.religion-icon {
  width: 22px;
  height: 22px;
  object-fit: contain;
  border-radius: 50%;
  background: none;
  filter: none !important;
}

.religion-btn.active .religion-icon {
  filter: brightness(100%);
}

/* Responsive for mobile */
@media (max-width: 768px) {
  .religion-buttons {
    bottom: 15px;
    gap: 10px;
    padding: 8px 14px;
  }
  .religion-btn {
    font-size: 13px;
    padding: 7px 10px;
  }
  .religion-icon {
    width: 20px;
    height: 20px;
  }
}
</style>

<script>
document.querySelectorAll('.religion-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.religion-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  });
});
</script>


<style>
  :root{
    /* Apple-ish frosted glass palette */
    --bg:#f6f7f9;
    --panel: rgba(255,255,255,0.7);
    --glass: rgba(255,255,255,0.6);
    --glass-2: rgba(255,255,255,0.5);
    --muted:#6b7280;
    --text:#0f1724;
    --accent: #4f46e5;
    --accent-2: #7c3aed;
    --radius:14px;
    --cardShadow: 0 8px 30px rgba(12,18,28,0.06);
    --glassBorder: rgba(15,23,36,0.06);
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Inter", "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    background: linear-gradient(180deg, #f7f8fa 0%, #eef1f4 100%);
    display:flex;align-items:center;justify-content:center;padding:28px;color:var(--text);
    -webkit-font-smoothing:antialiased;
  }

  .canvas{
    width:100%;max-width:1100px;border-radius:18px;padding:20px;background:linear-gradient(180deg, rgba(255,255,255,0.8), rgba(250,250,250,0.9));
    box-shadow: var(--cardShadow); border:1px solid var(--glassBorder);backdrop-filter: blur(10px) saturate(120%);
  }

  header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .logoBox{display:flex;gap:12px;align-items:center}
  .logo{
    width:54px;height:54px;border-radius:12px;background:linear-gradient(180deg,#fff,#fafafa);display:flex;align-items:center;justify-content:center;border:1px solid #eef2f7;box-shadow:0 2px 6px rgba(12,18,28,0.04)
  }
  .logo svg{width:30px;height:30px;opacity:0.95}
  h1{margin:0;font-size:18px;font-weight:600;color:var(--text)}
  p.lead{margin:2px 0 0;color:var(--muted);font-size:13px}

  /* grid */
  .grid{display:grid;grid-template-columns: repeat(auto-fit,minmax(160px,1fr));gap:12px;margin-top:18px}
  .card{
    border-radius:12px;padding:12px;display:flex;gap:12px;align-items:center;background:linear-gradient(180deg, rgba(255,255,255,0.85), rgba(250,250,250,0.85));
    border:1px solid rgba(15,23,36,0.04);cursor:pointer;transition:transform .18s cubic-bezier(.2,.9,.2,1), box-shadow .18s ease;
  }
  .card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(12,18,28,0.06)}
  .iconWrap{width:48px;height:48px;border-radius:10px;background:linear-gradient(180deg,#fff,#f5f7fb);display:flex;align-items:center;justify-content:center;border:1px solid rgba(15,23,36,0.04)}
  .meta h3{margin:0;font-size:15px}
  .meta p{margin:6px 0 0;color:var(--muted);font-size:12px}

  /* help */
  .help{margin-top:16px;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(248,249,250,0.95));border:1px solid rgba(15,23,36,0.04);display:flex;justify-content:space-between;gap:12px;align-items:center}
  .btn{padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:600;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;box-shadow:0 6px 18px rgba(79,70,229,0.12)}
  .btn.ghost{background:transparent;border:1px solid rgba(15,23,36,0.06);color:var(--muted);font-weight:600}

  /* modal */
  .modal-backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:18px;background:rgba(10,12,14,0.06);z-index:60}
  .modal{
    width:880px;max-width:96%;border-radius:14px;padding:18px;background:linear-gradient(180deg, rgba(255,255,255,0.85), rgba(250,250,250,0.9));border:1px solid rgba(15,23,36,0.04);
    box-shadow:0 30px 80px rgba(12,18,28,0.08);display:grid;grid-template-columns:1fr 360px;gap:14px;transform:translateY(12px);opacity:0;transition:transform .22s cubic-bezier(.2,.9,.2,1),opacity .18s ease;
  }
  .modal.show{transform:none;opacity:1}

  .modal h2{margin:0;font-size:17px}
  .modal .side{padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(250,250,250,0.95));border:1px solid rgba(15,23,36,0.04)}
  label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
  select,input{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(15,23,36,0.06);background:transparent;color:var(--text);font-size:14px}

  /* custom select styling to avoid white-on-white */
  select{
    appearance:none;
    -webkit-appearance:none;
    -moz-appearance:none;
    background: linear-gradient(90deg, rgba(255,255,255,0.7), rgba(240,240,240,0.7));
    padding-right:34px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="14" height="10"><path fill="%236b7280" d="M1 1l6 6 6-6" /></svg>');
    background-repeat:no-repeat;
    background-position: right 10px center;
    background-size: 14px 10px;
  }
  select option { color:var(--text) }

  .addr{word-break:break-all;font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;background:rgba(10,12,14,0.02);padding:10px;border-radius:10px;font-size:13px;color:var(--text);border:1px solid rgba(15,23,36,0.03)}
  .qrWrap{display:flex;align-items:center;justify-content:center;padding:8px;border-radius:12px;background:#fff;border:1px solid rgba(15,23,36,0.04)}
  .qrWrap img{width:220px;height:220px;border-radius:10px}

  .actions{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
  .small{font-size:12px;color:var(--muted)}

  .toast{position:fixed;right:18px;bottom:18px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;padding:10px 14px;border-radius:10px;box-shadow:0 10px 30px rgba(12,18,28,0.12);z-index:100;opacity:0;transform:translateY(10px);transition:opacity .16s ease,transform .16s ease}
  .toast.show{opacity:1;transform:none}

  /* Standardize & polish inline SVG icons in .iconWrap */
.iconWrap svg {
  width: 36px;
  height: 36px;
  display: block;
  object-fit: contain;
  filter: drop-shadow(0 2px 6px rgba(16,24,40,0.06));
  border-radius: 8px;
}

.crypto-icon {
  width: 38px;
  height: 38px;
  border-radius: 12px;
  object-fit: cover;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s ease;
}

.crypto-icon:hover {
  transform: scale(1.05);
}


  /* responsive */
  @media (max-width:920px){ .modal{grid-template-columns:1fr;} .qrWrap img{width:180px;height:180px} }
  @media (max-width:560px){ .grid{grid-template-columns:repeat(2,1fr)} .logo{width:46px;height:46px} h1{font-size:16px} }
</style>
</head>
<body>
  <div class="canvas" role="main" aria-live="polite">
    <header>
      <div class="logoBox">
        <div class="logo" aria-hidden="true">
          <!-- minimal anonymous icon -->
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="3" width="18" height="18" rx="5" fill="#ffffff"/><path d="M7 12h10" stroke="#d1d5db" stroke-width="1.5" stroke-linecap="round"/></svg>
        </div>
        <div>
          <h1 style="font-weight:600">Religious Crypto Donation</h1>
          <p class="lead">Pick coin → choose chain → scan QR / copy / Click to send.</p>
        </div>
      </div>

      <div style="display:flex;gap:8px;align-items:center">
        <button class="btn ghost" id="openGuide">How to send</button>
      </div>
    </header>

    <div class="grid" id="coinsGrid" aria-hidden="false">
      <!-- coins injected by JS -->
    </div>

    <div class="help" role="note">
      <div style="display:flex;gap:12px;align-items:center">
        <div style="font-weight:700">Tip</div>
        <div class="small">Use <strong>Click to send</strong> on a mobile device to open a wallet. If the wallet doesn't open, copy the address or scan the QR.</div>
      </div>
      <div class="small">Always confirm the correct chain before sending.</div>
    </div>

  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true" role="dialog">
    <div class="modal" role="document" aria-labelledby="modalTitle">
      <div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <div>
            <h2 id="modalTitle">Coin</h2>
            <div class="small" id="modalChain">Chain: —</div>
          </div>
          <div>
            <button class="btn ghost" id="closeModal">Close</button>
          </div>
        </div>

        <div class="side">
          <label for="chainSelect">Choose chain / token</label>
          <select id="chainSelect" aria-label="Choose chain"></select>

          <div style="margin-top:12px">
            <label>Address</label>
            <div class="addr" id="addressDisplay" aria-live="polite">—</div>
          </div>

          <div style="margin-top:12px">
            <label>Amount (optional)</label>
            <input id="amountInput" inputmode="decimal" placeholder="e.g. 0.01" />
            <div class="small" id="amountHint" style="margin-top:6px">Amount encoded in QR/URI when possible.</div>
          </div>

          <div class="actions">
            <button class="btn" id="clickToSend">Click to send</button>
            <button class="btn ghost" id="copyAddress">Copy address</button>
            <button class="btn ghost" id="openExplorer">Open in explorer</button>
          </div>

        </div>
      </div>

      <div>
        <div class="side" style="display:flex;flex-direction:column;align-items:center;gap:12px">
          <div style="display:flex;gap:8px;align-items:center;width:100%;justify-content:space-between">
            <div style="display:flex;gap:8px;align-items:center">
              <div id="coinIconLarge" style="width:44px;height:44px;border-radius:10px;background:linear-gradient(180deg,#fff,#f3f4f6);display:flex;align-items:center;justify-content:center;border:1px solid rgba(15,23,36,0.04)"></div>
              <div>
                <div id="coinName" style="font-weight:700">Coin</div>
                <div class="small" id="coinTicker">TICK</div>
              </div>
            </div>
            <div class="small">Scan QR or copy</div>
          </div>

          <div class="qrWrap" id="qrWrap" role="img" aria-label="QR code">
            <img id="qrImage" alt="QR code" src="" />
          </div>

          <div style="width:100%;display:flex;gap:8px;justify-content:space-between;align-items:center">
            <div class="small">Double-check network and address before sending.</div>
          </div>

        </div>
      </div>

    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite">Copied</div>

<script>


/* ============================
   Addresses config — YOUR provided addresses
   (kept here as-is; no personal names)
   ============================ */
const CONFIG = {
  Bitcoin: {
    icon: `<img src="bitcoin.png" alt="Bitcoin" class="crypto-icon">`,
    chains: [{ id:'BTC', label:'Bitcoin (BTC)', address:'bc1qhyku26vluqwa7g9e2za0j7t9z7w4d2hpey4e3v', explorer:'https://blockchair.com/bitcoin/address/' }]
  },

  Ethereum: {
    icon: `<img src="ethereum.png" alt="Ethereum" class="crypto-icon">`,
    chains: [{ id:'ETH', label:'Ethereum (ETH / ERC-20)', address:'0x5f0680f17BDb5066AD0092c9cC1e0f3555aEe030', explorer:'https://etherscan.io/address/' }]
  },

  BNB: {
    icon: `<img src="bnb.png" alt="BNB" class="crypto-icon">`,
    chains: [
      { id:'BSC', label:'BNB (BEP-20 on BSC)', address:'0x5f0680f17BDb5066AD0092c9cC1e0f3555aEe030', explorer:'https://bscscan.com/address/' }
    ]
  },

  Litecoin: {
    icon: `<img src="litecoin.jpg" alt="Litecoin" class="crypto-icon">`,
    chains: [{ id:'LTC', label:'Litecoin (LTC)', address:'Lcx9gXGGyWw67gJ5oxikK5HfAGkWC1i3WC', explorer:'https://blockchair.com/litecoin/address/' }]
  },

  Solana: {
    icon: `<img src="solana.jpeg" alt="Solana" class="crypto-icon">`,
    chains: [{ id:'SOL', label:'Solana (SOL)', address:'AJa6gPP7D6gfENRYztrfx4HDQeqCGnfBubzDhUGyYTi3', explorer:'https://solscan.io/account/' }]
  },

  USDT: {
    icon: `<img src="usdt.png" alt="USDT" class="crypto-icon">`,
    chains: [
      { id:'USDT_ERC20', label:'USDT (ERC-20)', address:'0x5f0680f17BDb5066AD0092c9cC1e0f3555aEe030', explorer:'https://etherscan.io/address/' },
      { id:'USDT_BEP20', label:'USDT (BEP-20)', address:'0x5f0680f17BDb5066AD0092c9cC1e0f3555aEe030', explorer:'https://bscscan.com/address/' },
      { id:'USDT_TRC20', label:'USDT (TRC-20)', address:'TY2c9vmGhYoCndxa3VvxTSfpej8Cku42pU', explorer:'https://tronscan.org/#/address/' },
      { id:'USDT_SOL', label:'USDT (Solana)', address:'AJa6gPP7D6gfENRYztrfx4HDQeqCGnfBubzDhUGyYTi3', explorer:'https://solscan.io/account/' }
    ]
  },

  USDC: {
    icon: `<img src="usdc.png" alt="USDC" class="crypto-icon">`,
    chains: [
      { id:'USDC_ERC20', label:'USDC (ERC-20)', address:'0x5f0680f17BDb5066AD0092c9cC1e0f3555aEe030', explorer:'https://etherscan.io/address/' },
      { id:'USDC_SOL', label:'USDC (Solana)', address:'AJa6gPP7D6gfENRYztrfx4HDQeqCGnfBubzDhUGyYTi3', explorer:'https://solscan.io/account/' },
      { id:'USDC_BEP20', label:'USDC (BEP-20)', address:'0x5f0680f17BDb5066AD0092c9cC1e0f3555aEe030', explorer:'https://bscscan.com/address/' },
      { id:'USDC_POLY', label:'USDC (Polygon)', address:'0x5f0680f17BDb5066AD0092c9cC1e0f3555aEe030', explorer:'https://polygonscan.com/address/' }
    ]
  }
};


/* ============================
   UI Refs
   ============================ */
const coinsGrid = document.getElementById('coinsGrid');
const modalBackdrop = document.getElementById('modalBackdrop');
const modal = modalBackdrop.querySelector('.modal');
const modalTitle = document.getElementById('modalTitle');
const modalChain = document.getElementById('modalChain');
const chainSelect = document.getElementById('chainSelect');
const addressDisplay = document.getElementById('addressDisplay');
const qrImage = document.getElementById('qrImage');
const amountInput = document.getElementById('amountInput');
const clickToSend = document.getElementById('clickToSend');
const copyAddressBtn = document.getElementById('copyAddress');
const openExplorerBtn = document.getElementById('openExplorer');
const closeModalBtn = document.getElementById('closeModal');
const coinIconLarge = document.getElementById('coinIconLarge');
const coinNameEl = document.getElementById('coinName');
const coinTickerEl = document.getElementById('coinTicker');
const toast = document.getElementById('toast');
const openGuide = document.getElementById('openGuide');

/* Render coin cards */
Object.entries(CONFIG).forEach(([coinKey, coinData]) => {
  const btn = document.createElement('button');
  btn.type = 'button';
  btn.className = 'card';
  btn.innerHTML = `<div class="iconWrap" aria-hidden="true">${coinData.icon}</div>
                   <div class="meta"><h3>${coinKey}</h3><p class="small">${coinData.chains.map(c => c.id).join(' · ')}</p></div>`;
  btn.addEventListener('click', ()=> openModal(coinKey));
  coinsGrid.appendChild(btn);
});

let currentCoin = null;
let currentChain = null;

/* Open modal */
function openModal(coinKey){
  currentCoin = coinKey;
  const data = CONFIG[coinKey];
  modalTitle.textContent = coinKey;
  coinIconLarge.innerHTML = data.icon;
  coinNameEl.textContent = coinKey;
  coinTickerEl.textContent = data.chains.map(c=>c.id).join(' · ');

  // populate chains
  chainSelect.innerHTML = '';
  data.chains.forEach((c, idx) => {
    const opt = document.createElement('option');
    opt.value = idx;
    opt.textContent = c.label;
    chainSelect.appendChild(opt);
  });
  chainSelect.selectedIndex = 0;
  updateChain();

  modalBackdrop.style.display = 'flex';
  setTimeout(()=> modal.classList.add('show'), 10);
  modalBackdrop.setAttribute('aria-hidden','false');
}

/* Update chain selection */
function updateChain(){
  const data = CONFIG[currentCoin];
  currentChain = data.chains[parseInt(chainSelect.value,10)];
  modalChain.textContent = 'Chain: ' + (currentChain.label || '—');
  addressDisplay.textContent = currentChain.address || 'No address provided for this chain';
  amountInput.value = '';
  updateQR();
}

/* Build URI for click-to-send */
function buildURI(chainObj, amount){
  const addr = chainObj.address || '';
  const id = (chainObj.id || '').toUpperCase();

  // BTC/LTC/DOGE scheme
  if (id === 'BTC' || id === 'LTC' || id === 'DOGE') {
    let scheme = id === 'BTC' ? 'bitcoin' : id === 'LTC' ? 'litecoin' : 'dogecoin';
    let uri = `${scheme}:${addr}`;
    if (amount) uri += `?amount=${encodeURIComponent(amount)}`;
    return uri;
  }

  // Solana
  if (id.includes('SOL')) {
    let uri = `solana:${addr}`;
    if (amount) uri += `?amount=${encodeURIComponent(amount)}`;
    return uri;
  }

  // Tron
  if (id.includes('TRC') || id.includes('TRON')) {
    return `tron:${addr}`;
  }

  // Ethereum/EVM style (ERC20, BSC, Polygon)
  if (id.includes('ETH') || id.includes('ERC') || id.includes('BEP') || id.includes('BSC') || id.includes('POLY') || id.includes('MATIC')) {
    let uri = `ethereum:${addr}`;
    if (amount) uri += `?value=${encodeURIComponent(amount)}`;
    return uri;
  }

  // fallback
  return addr;
}

/* Generate QR using public QR server (reliable) */
function updateQR(){
  const amt = amountInput.value.trim();
  const uri = buildURI(currentChain, amt) || currentChain.address || '';
  const encoded = encodeURIComponent(uri);
  // Using goqr.me API (simple & reliable)
  const size = 220;
  qrImage.src = `https://api.qrserver.com/v1/create-qr-code/?size=${size}x${size}&data=${encoded}&format=png`;
  qrImage.alt = 'QR for ' + (currentChain.address || 'address');
}

/* Copy helper */
async function copyText(text){
  if(!text){ showToast('No address available', true); return; }
  try{
    await navigator.clipboard.writeText(text);
    showToast('Address copied to clipboard');
  }catch(e){
    // fallback
    const ta = document.createElement('textarea'); ta.value = text; document.body.appendChild(ta); ta.select();
    try{ document.execCommand('copy'); showToast('Address copied to clipboard'); } catch(err){ alert('Copy failed — copy manually: ' + text); }
    ta.remove();
  }
}

/* toast */
let tt;
function showToast(msg, isError){
  toast.textContent = msg;
  toast.style.background = isError ? 'linear-gradient(90deg,#fb7185,#f43f5e)' : 'linear-gradient(90deg,#4f46e5,#7c3aed)';
  toast.classList.add('show');
  clearTimeout(tt);
  tt = setTimeout(()=> toast.classList.remove('show'), 2200);
}

/* Click to send action */
clickToSend.addEventListener('click', async ()=>{
  const amount = amountInput.value.trim();
  const uri = buildURI(currentChain, amount);

  // Try to open URI (mobile wallets), then copy as fallback
  try {
    // For safety, if uri is bare address then copy and open explorer instead
    if (!uri.includes(':')) {
      await copyText(currentChain.address);
      showToast('Address copied — paste in your wallet to send');
      return;
    }
    // Attempt to open
    window.location.href = uri;
    // Copy as backup
    await copyText(currentChain.address);
    showToast('Trying to open wallet... address copied as fallback');
  } catch(e) {
    await copyText(currentChain.address);
    showToast('Failed to open wallet — address copied', true);
  }
});

/* other buttons */
copyAddressBtn.addEventListener('click', ()=> copyText(currentChain.address));
openExplorerBtn.addEventListener('click', ()=> {
  if (!currentChain.explorer || !currentChain.address){ showToast('No explorer or address', true); return; }
  const url = currentChain.explorer + encodeURIComponent(currentChain.address);
  window.open(url, '_blank');
});

closeModalBtn.addEventListener('click', closeModal);
modalBackdrop.addEventListener('click', (e)=> { if (e.target === modalBackdrop) closeModal(); });
chainSelect.addEventListener('change', ()=> updateChain());
amountInput.addEventListener('input', ()=> updateQR());

function closeModal(){
  modal.classList.remove('show');
  setTimeout(()=> { modalBackdrop.style.display = 'none'; modalBackdrop.setAttribute('aria-hidden','true'); }, 200);
}

/* guide button */
openGuide.addEventListener('click', ()=>{
  alert('How to send (quick):\\n1) Tap coin → choose correct chain.\\n2) (Optional) enter amount.\\n3) On mobile: Click "Click to send" to open wallet.\\n4) If wallet does not open: copy address or scan QR and paste into your wallet.\\n5) Verify network and address before confirming the transfer.');
});

/* keyboard esc */
document.addEventListener('keydown', (e)=> { if (e.key === 'Escape') closeModal(); });

/* accessibility: focus */
modalBackdrop.addEventListener('transitionend', ()=> { if (modal.classList.contains('show')) closeModalBtn.focus(); });

const religionButtons = document.querySelector('.religion-buttons');

// Detect when popup opens
document.querySelectorAll('.crypto-card button').forEach(btn => {
  btn.addEventListener('click', () => {
    if (window.innerWidth <= 768) {
      religionButtons.classList.add('hide-on-popup');
    }
  });
});

// Detect when popup closes (assuming it has a close button or click-outside event)
document.querySelectorAll('.popup, .close-popup').forEach(el => {
  el.addEventListener('click', () => {
    if (window.innerWidth <= 768) {
      religionButtons.classList.remove('hide-on-popup');
    }
  });
});

</script>

</body>
</html>
